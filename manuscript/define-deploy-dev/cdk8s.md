# Define And Deploy The App To Dev With CDK For Kubernetes (cdk8s)

TODO: Intro

## Setup

* [Install the `cdk8s` CLI](https://cdk8s.io/docs/latest/getting-started/#install-the-cli)
* We'll define the manifests in Go (even though other languages are supported) so please install and configure [Go](https://go.dev/doc/install).

```bash
yq --inplace ".ingress.host = \"cncf-demo-dev.$DOMAIN\"" \
    cdk8s/app.yaml

yq --inplace ".image.repository = \"$IMAGE\"" cdk8s/app.yaml
```

## Do

```bash
cd cdk8s

cat main.go

cat app.go

cdk8s synth --output ../yaml/dev --validate 

cd ..

cat yaml/dev/cncf-demo.k8s.yaml

kubectl --namespace dev apply --filename yaml/dev

echo "http://cncf-demo-dev.$DOMAIN"

# Open it in a browser
```

* If you chose `kbld` to build images, you'll need to run `helm template` command to convert the chart into "pure" Kubernetes YAML manifests. Then you can use `kbld` to build the images, modify the manifests with image SHAs, and use `kubectl` to apply the manifests generated by `kbld`.

## Continue The Adventure

[Use HTTPS](../https/story.md)
