# Define And Deploy The App To Dev With Carvel ytt

TODO: Intro

## Setup

* [Install the `ytt` CLI](https://carvel.dev/ytt/docs/v0.44.0/install)

```bash
yq --inplace ".ingress.host = \"cncf-demo-dev.$DOMAIN\"" \
    ytt/schema.yaml

yq --inplace ".image.repository = \"$IMAGE\"" \
    ytt/schema.yaml
```

## Do

```bash
ls -1 ytt/resources

cat ytt/resources/deployment.yaml

cat ytt/resources/service.yaml

cat ytt/resources/ingress.yaml

cat ytt/schema.yaml

cat ytt/values-dev.yaml

yq --inplace ".image.tag = \"$TAG\"" ytt/values-dev.yaml

cat ytt/values-dev.yaml

ytt --file ytt/schema.yaml --file ytt/resources \
    --data-values-file ytt/values-dev.yaml \
    | tee yaml/dev/app.yaml

kubectl --namespace dev apply --filename yaml/dev

echo "http://cncf-demo-dev.$DOMAIN"

# Open it in a browser
```

* If you chose `kbld` to build images, you'll need to run `helm template` command to convert the chart into "pure" Kubernetes YAML manifests. Then you can use `kbld` to build the images, modify the manifests with image SHAs, and use `kubectl` to apply the manifests generated by `kbld`.

## Continue The Adventure

[Use HTTPS](../https/README.md)
